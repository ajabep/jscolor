/**
 * jscolor, JavaScript Color Picker
 *
 * @version 1.4.2
 * @license GNU Lesser General Public License, http://www.gnu.org/copyleft/lesser.html
 * @author  Jan Odvarko, http://odvarko.cz
 * @created 2008-06-15
 * @updated 2014-06-04
 * @link    http://jscolor.com
 */
var jscolor={dir:"",bindClass:"jscolor",binding:!0,preloading:!0,install:function(){jscolor.addEvent(window,"load",jscolor.init)},init:function(){jscolor.binding&&jscolor.bind();jscolor.preloading&&jscolor.preload()},getDir:function(){if(!jscolor.dir){var a=jscolor.detectDir();jscolor.dir=!1!==a?a:"jscolor/"}return jscolor.dir},detectDir:function(){var a=document.getElementsByTagName("html")[0].getAttribute("data-jscolor-dir");if(null!=a)return a;for(var a=location.href,f=document.getElementsByTagName("base"),
c=0;c<f.length;c++)f[c].href&&(a=f[c].href);f=document.getElementsByTagName("script");for(c=0;c<f.length;c++)if(f[c].src&&/(^|\/)jscolor\.js([?#].*)?$/i.test(f[c].src))return a=(new jscolor.URI(f[c].src)).toAbsolute(a),a.path=a.path.replace(/[^\/]+$/,""),a.query=null,a.fragment=null,a.toString();return!1},bind:function(){for(var a=new RegExp("(^|\\s)("+jscolor.bindClass+")\\s*(\\{[^}]*\\})?","i"),f=document.getElementsByTagName("input"),c=0;c<f.length;c++){var n;if(!f[c].color&&(f[c].className&&(n=
f[c].className.match(a))||f[c].classList&&(n=f[c].classList.contains(jscolor.bindClass)))){var u={};if(n[3])try{u=JSON.parse(n[3])}catch(z){}f[c].color=new jscolor.color(f[c],u)}}},preload:function(){for(var a in jscolor.imgRequire)jscolor.imgRequire.hasOwnProperty(a)&&jscolor.loadImage(a)},images:{pad:[181,101],sld:[16,101],cross:[15,15],arrow:[7,11]},imgRequire:{},imgLoaded:{},requireImage:function(a){jscolor.imgRequire[a]=!0},loadImage:function(a){jscolor.imgLoaded[a]||(jscolor.imgLoaded[a]=new Image,
jscolor.imgLoaded[a].src=jscolor.getDir()+a)},fetchElement:function(a){return"string"===typeof a?document.getElementById(a):a},addEvent:function(a,f,c){a.addEventListener?a.addEventListener(f,c,!1):a.attachEvent&&a.attachEvent("on"+f,c)},fireEvent:function(a,f){if(a)if(document.createEvent){var c=document.createEvent("HTMLEvents");c.initEvent(f,!0,!0);a.dispatchEvent(c)}else if(document.createEventObject)c=document.createEventObject(),a.fireEvent("on"+f,c);else if(a["on"+f])a["on"+f]()},getElementPos:function(a){var f=
a,c=0,n=0;if(f.offsetParent){do c+=f.offsetLeft,n+=f.offsetTop;while(f=f.offsetParent)}for(;(a=a.parentNode)&&"BODY"!==a.nodeName.toUpperCase();)c-=a.scrollLeft,n-=a.scrollTop;return[c,n]},getElementSize:function(a){return[a.offsetWidth,a.offsetHeight]},getRelMousePos:function(a){var f=0,c=0;a||(a=window.event);"number"===typeof a.offsetX?(f=a.offsetX,c=a.offsetY):"number"===typeof a.layerX&&(f=a.layerX,c=a.layerY);return{x:f,y:c}},getViewPos:function(){return"number"===typeof window.pageYOffset?
[window.pageXOffset,window.pageYOffset]:document.body&&(document.body.scrollLeft||document.body.scrollTop)?[document.body.scrollLeft,document.body.scrollTop]:document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)?[document.documentElement.scrollLeft,document.documentElement.scrollTop]:[0,0]},getViewSize:function(){return"number"===typeof window.innerWidth?[window.innerWidth,window.innerHeight]:document.body&&(document.body.clientWidth||document.body.clientHeight)?
[document.body.clientWidth,document.body.clientHeight]:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?[document.documentElement.clientWidth,document.documentElement.clientHeight]:[0,0]},URI:function(a){function f(c){for(var a="";c;)if("../"===c.substr(0,3)||"./"===c.substr(0,2))c=c.replace(/^\.+/,"").substr(1);else if("/./"===c.substr(0,3)||"/."===c)c="/"+c.substr(3);else if("/../"===c.substr(0,4)||"/.."===c)c="/"+c.substr(4),a=a.replace(/\/?[^\/]*$/,
"");else if("."===c||".."===c)c="";else{var f=c.match(/^\/?[^\/]*/)[0];c=c.substr(f.length);a+=f}return a}this.authority=this.scheme=null;this.path="";this.fragment=this.query=null;this.parse=function(c){c=c.match(/^(([A-Za-z][0-9A-Za-z+.-]*)(:))?((\/\/)([^\/?#]*))?([^?#]*)((\?)([^#]*))?((#)(.*))?/);this.scheme=c[3]?c[2]:null;this.authority=c[5]?c[6]:null;this.path=c[7];this.query=c[9]?c[10]:null;this.fragment=c[12]?c[13]:null;return this};this.toString=function(){var c="";null!==this.scheme&&(c=
c+this.scheme+":");null!==this.authority&&(c=c+"//"+this.authority);null!==this.path&&(c+=this.path);null!==this.query&&(c=c+"?"+this.query);null!==this.fragment&&(c=c+"#"+this.fragment);return c};this.toAbsolute=function(c){c=new jscolor.URI(c);var a=new jscolor.URI;if(null===c.scheme)return!1;null!==this.scheme&&this.scheme.toLowerCase()===c.scheme.toLowerCase()&&(this.scheme=null);null!==this.scheme?(a.scheme=this.scheme,a.authority=this.authority,a.path=f(this.path),a.query=this.query):(null!==
this.authority?(a.authority=this.authority,a.path=f(this.path),a.query=this.query):(""===this.path?(a.path=c.path,a.query=null!==this.query?this.query:c.query):("/"===this.path.substr(0,1)?a.path=f(this.path):(a.path=null!==c.authority&&""===c.path?"/"+this.path:c.path.replace(/[^\/]+$/,"")+this.path,a.path=f(a.path)),a.query=this.query),a.authority=c.authority),a.scheme=c.scheme);a.fragment=this.fragment;return a};a&&this.parse(a)},color:function(a,f){function c(b,c,a){if(null===b)return[a,a,a];
var d=Math.floor(b),e=a*(1-c);b=a*(1-c*(d%2?b-d:1-(b-d)));switch(d){case 6:case 0:return[a,b,e];case 1:return[b,a,e];case 2:return[e,a,b];case 3:return[e,b,a];case 4:return[b,e,a];case 5:return[a,e,b]}}function n(b,c){if(!jscolor.picker){jscolor.picker={box:document.createElement("div"),boxB:document.createElement("div"),pad:document.createElement("div"),padB:document.createElement("div"),padM:document.createElement("div"),sld:document.createElement("div"),sldB:document.createElement("div"),sldM:document.createElement("div"),
btn:document.createElement("div"),btnS:document.createElement("span"),btnT:document.createTextNode(d.pickerCloseText)};for(var m=0;m<jscolor.images.sld[1];m+=4){var f=document.createElement("div");f.style.height="4px";f.style.fontSize="1px";f.style.lineHeight="0";jscolor.picker.sld.appendChild(f)}jscolor.picker.sldB.appendChild(jscolor.picker.sld);jscolor.picker.box.appendChild(jscolor.picker.sldB);jscolor.picker.box.appendChild(jscolor.picker.sldM);jscolor.picker.padB.appendChild(jscolor.picker.pad);
jscolor.picker.box.appendChild(jscolor.picker.padB);jscolor.picker.box.appendChild(jscolor.picker.padM);jscolor.picker.btnS.appendChild(jscolor.picker.btnT);jscolor.picker.btn.appendChild(jscolor.picker.btnS);jscolor.picker.box.appendChild(jscolor.picker.btn);jscolor.picker.boxB.appendChild(jscolor.picker.box)}var e=jscolor.picker;e.box.onmouseup=e.box.onmouseout=function(){a.focus()};e.box.onmousedown=function(){v=!0};e.box.onmousemove=function(b){if(p||q)p&&A(b),q&&B(b),document.selection?document.selection.empty():
window.getSelection&&window.getSelection().removeAllRanges(),w()};"ontouchstart"in window&&(m=function(b){var a={offsetX:b.touches[0].pageX-r.X,offsetY:b.touches[0].pageY-r.Y};if(p||q)p&&A(a),q&&B(a),w();b.stopPropagation();b.preventDefault()},e.box.removeEventListener("touchmove",m,!1),e.box.addEventListener("touchmove",m,!1));e.padM.onmouseup=e.padM.onmouseout=function(){p&&(p=!1,jscolor.fireEvent(k,"change"))};e.padM.onmousedown=function(b){switch(s){case 0:0===d.hsv[2]&&d.fromHSV(null,null,1);
break;case 1:0===d.hsv[1]&&d.fromHSV(null,1,null)}q=!1;p=!0;A(b);w()};"ontouchstart"in window&&e.padM.addEventListener("touchstart",function(b){r={X:b.target.offsetParent.offsetLeft,Y:b.target.offsetParent.offsetTop};this.onmousedown({offsetX:b.touches[0].pageX-r.X,offsetY:b.touches[0].pageY-r.Y})});e.sldM.onmouseup=e.sldM.onmouseout=function(){q&&(q=!1,jscolor.fireEvent(k,"change"))};e.sldM.onmousedown=function(b){p=!1;q=!0;B(b);w()};"ontouchstart"in window&&e.sldM.addEventListener("touchstart",
function(b){r={X:b.target.offsetParent.offsetLeft,Y:b.target.offsetParent.offsetTop};this.onmousedown({offsetX:b.touches[0].pageX-r.X,offsetY:b.touches[0].pageY-r.Y})});m=u(d);e.box.style.width=m[0]+"px";e.box.style.height=m[1]+"px";e.boxB.style.position="fixed";e.boxB.style.clear="both";e.boxB.style.left=b+"px";e.boxB.style.top=c+"px";e.boxB.style.zIndex=d.pickerZIndex;e.boxB.style.border=d.pickerBorder+"px solid";e.boxB.style.borderColor=d.pickerBorderColor;e.boxB.style.background=d.pickerFaceColor;
e.pad.style.width=jscolor.images.pad[0]+"px";e.pad.style.height=jscolor.images.pad[1]+"px";e.padB.style.position="absolute";e.padB.style.left=d.pickerFace+"px";e.padB.style.top=d.pickerFace+"px";e.padB.style.border=d.pickerInset+"px solid";e.padB.style.borderColor=d.pickerInsetColor;e.padM.style.position="absolute";e.padM.style.left="0";e.padM.style.top="0";e.padM.style.width=d.pickerFace+2*d.pickerInset+jscolor.images.pad[0]+jscolor.images.arrow[0]+"px";e.padM.style.height=e.box.style.height;e.padM.style.cursor=
"crosshair";e.sld.style.overflow="hidden";e.sld.style.width=jscolor.images.sld[0]+"px";e.sld.style.height=jscolor.images.sld[1]+"px";e.sldB.style.display=d.slider?"block":"none";e.sldB.style.position="absolute";e.sldB.style.right=d.pickerFace+"px";e.sldB.style.top=d.pickerFace+"px";e.sldB.style.border=d.pickerInset+"px solid";e.sldB.style.borderColor=d.pickerInsetColor;e.sldM.style.display=d.slider?"block":"none";e.sldM.style.position="absolute";e.sldM.style.right="0";e.sldM.style.top="0";e.sldM.style.width=
jscolor.images.sld[0]+jscolor.images.arrow[0]+d.pickerFace+2*d.pickerInset+"px";e.sldM.style.height=e.box.style.height;try{e.sldM.style.cursor="pointer"}catch(l){e.sldM.style.cursor="hand"}e.btn.style.display=d.pickerClosable?"block":"none";e.btn.style.position="absolute";e.btn.style.left=d.pickerFace+"px";e.btn.style.bottom=d.pickerFace+"px";e.btn.style.padding="0 15px";e.btn.style.height="18px";e.btn.style.border=d.pickerInset+"px solid";(function(){var b=d.pickerInsetColor.split(/\s+/);e.btn.style.borderColor=
2>b.length?b[0]:b[1]+" "+b[0]+" "+b[0]+" "+b[1]})();e.btn.style.color=d.pickerButtonColor;e.btn.style.font="12px sans-serif";e.btn.style.textAlign="center";try{e.btn.style.cursor="pointer"}catch(h){e.btn.style.cursor="hand"}e.btn.onmousedown=function(){d.hidePicker()};e.btnS.style.lineHeight=e.btn.style.height;switch(s){case 0:var g="hs.png";break;case 1:g="hv.png"}e.padM.style.backgroundImage="url('"+jscolor.getDir()+"cross.gif')";e.padM.style.backgroundRepeat="no-repeat";e.sldM.style.backgroundImage=
"url('"+jscolor.getDir()+"arrow.gif')";e.sldM.style.backgroundRepeat="no-repeat";e.pad.style.backgroundImage="url('"+jscolor.getDir()+g+"')";e.pad.style.backgroundRepeat="no-repeat";e.pad.style.backgroundPosition="0 0";z();F();jscolor.picker.owner=d;document.getElementsByTagName("body")[0].appendChild(e.boxB)}function u(b){return[2*b.pickerInset+2*b.pickerFace+jscolor.images.pad[0]+(b.slider?2*b.pickerInset+2*jscolor.images.arrow[0]+jscolor.images.sld[0]:0),b.pickerClosable?4*b.pickerInset+3*b.pickerFace+
jscolor.images.pad[1]+b.pickerButtonHeight:2*b.pickerInset+2*b.pickerFace+jscolor.images.pad[1]]}function z(){switch(s){case 0:var b=1;break;case 1:b=2}var a=Math.round(d.hsv[0]/6*(jscolor.images.pad[0]-1)),b=Math.round((1-d.hsv[b])*(jscolor.images.pad[1]-1));jscolor.picker.padM.style.backgroundPosition=d.pickerFace+d.pickerInset+a-Math.floor(jscolor.images.cross[0]/2)+"px "+(d.pickerFace+d.pickerInset+b-Math.floor(jscolor.images.cross[1]/2))+"px";a=jscolor.picker.sld.childNodes;switch(s){case 0:for(var m=
c(d.hsv[0],d.hsv[1],1),b=0;b<a.length;b++)a[b].style.backgroundColor="rgb("+m[0]*(1-b/a.length)*100+"%,"+m[1]*(1-b/a.length)*100+"%,"+m[2]*(1-b/a.length)*100+"%)";break;case 1:var f,e=[d.hsv[2],0,0],b=Math.floor(d.hsv[0]),l=b%2?d.hsv[0]-b:1-(d.hsv[0]-b);switch(b){case 6:case 0:m=[0,1,2];break;case 1:m=[1,0,2];break;case 2:m=[2,0,1];break;case 3:m=[2,1,0];break;case 4:m=[1,2,0];break;case 5:m=[0,2,1]}for(b=0;b<a.length;b++)f=1-1/(a.length-1)*b,e[1]=e[0]*(1-f*l),e[2]=e[0]*(1-f),a[b].style.backgroundColor=
"rgb("+100*e[m[0]]+"%,"+100*e[m[1]]+"%,"+100*e[m[2]]+"%)"}}function F(){switch(s){case 0:var b=2;break;case 1:b=1}b=Math.round((1-d.hsv[b])*(jscolor.images.sld[1]-1));jscolor.picker.sldM.style.backgroundPosition="0 "+(d.pickerFace+d.pickerInset+b-Math.floor(jscolor.images.arrow[1]/2))+"px"}function y(){return jscolor.picker&&jscolor.picker.owner===d}function G(){k!==a&&d.importColor()}function A(b){var a=jscolor.getRelMousePos(b);b=a.x-d.pickerFace-d.pickerInset;a=a.y-d.pickerFace-d.pickerInset;switch(s){case 0:d.fromHSV(6/
(jscolor.images.pad[0]-1)*b,1-a/(jscolor.images.pad[1]-1),null,C);break;case 1:d.fromHSV(6/(jscolor.images.pad[0]-1)*b,null,1-a/(jscolor.images.pad[1]-1),C)}}function B(b){b=jscolor.getRelMousePos(b).y-d.pickerFace-d.pickerInset;switch(s){case 0:d.fromHSV(null,null,1-b/(jscolor.images.sld[1]-1),D);break;case 1:d.fromHSV(null,1-b/(jscolor.images.sld[1]-1),null,D)}}function w(){d.onImmediateChange&&("string"===typeof d.onImmediateChange?new Function(d.onImmediateChange):d.onImmediateChange).call(d)}
this.adjust=this.required=!0;this.hash=!1;this.slider=this.caps=!0;this.styleElement=this.valueElement=a;this.onImmediateChange=null;this.hsv=[0,0,1];this.rgb=[1,1,1];this.minH=0;this.maxH=6;this.minS=0;this.maxS=1;this.minV=0;this.maxV=1;this.pickerOnfocus=!0;this.pickerMode="HSV";this.pickerPosition="bottom";this.pickerSmartPosition=!0;this.pickerButtonHeight=20;this.pickerClosable=!1;this.pickerCloseText="Close";this.pickerButtonColor="ButtonText";this.pickerFace=10;this.pickerFaceColor="ThreeDFace";
this.pickerBorder=1;this.pickerBorderColor="ThreeDHighlight ThreeDShadow ThreeDShadow ThreeDHighlight";this.pickerInset=1;this.pickerInsetColor="ThreeDShadow ThreeDHighlight ThreeDHighlight ThreeDShadow";this.pickerZIndex=1E4;for(var t in f)f.hasOwnProperty(t)&&(this[t]=f[t]);this.hidePicker=function(){y()&&(delete jscolor.picker.owner,document.getElementsByTagName("body")[0].removeChild(jscolor.picker.boxB))};this.showPicker=function(){if(!y()){var b=jscolor.getElementPos(a),c=jscolor.getElementSize(a),
d=jscolor.getViewPos(),f=jscolor.getViewSize(),e=u(this),l,h,g;switch(this.pickerPosition.toLowerCase()){case "left":l=1;h=0;g=-1;break;case "right":l=1;h=0;g=1;break;case "top":l=0;h=1;g=-1;break;default:l=0,g=h=1}var k=(c[h]+e[h])/2,b=this.pickerSmartPosition?[-d[l]+b[l]+e[l]>f[l]?-d[l]+b[l]+c[l]/2>f[l]/2&&0<=b[l]+c[l]-e[l]?b[l]+c[l]-e[l]:b[l]:b[l],-d[h]+b[h]+c[h]+e[h]-k+k*g>f[h]?-d[h]+b[h]+c[h]/2>f[h]/2&&0<=b[h]+c[h]-k-k*g?b[h]+c[h]-k-k*g:b[h]+c[h]-k+k*g:0<=b[h]+c[h]-k+k*g?b[h]+c[h]-k+k*g:b[h]+
c[h]-k-k*g]:[b[l],b[h]+c[h]-k+k*g];n(b[l],b[h])}};this.importColor=function(){k?this.adjust?!this.required&&/^\s*$/.test(k.value)?(k.value="",g.style.backgroundImage=g.jscStyle.backgroundImage,g.style.backgroundColor=g.jscStyle.backgroundColor,g.style.color=g.jscStyle.color,this.exportColor(x|E)):this.fromString(k.value)||this.exportColor():this.fromString(k.value,x)||(g.style.backgroundImage=g.jscStyle.backgroundImage,g.style.backgroundColor=g.jscStyle.backgroundColor,g.style.color=g.jscStyle.color,
this.exportColor(x|E)):this.exportColor()};this.exportColor=function(b){if(!(b&x)&&k){var a=this.toString();this.caps&&(a=a.toUpperCase());this.hash&&(a="#"+a);k.value=a}b&E||!g||(g.style.backgroundImage="none",g.style.backgroundColor="#"+this.toString(),g.style.color=.5>.213*this.rgb[0]+.715*this.rgb[1]+.072*this.rgb[2]?"#FFF":"#000");b&D||!y()||z();b&C||!y()||F()};this.fromHSV=function(b,a,d,f){null!==b&&(b=Math.max(0,this.minH,Math.min(6,this.maxH,b)));null!==a&&(a=Math.max(0,this.minS,Math.min(1,
this.maxS,a)));null!==d&&(d=Math.max(0,this.minV,Math.min(1,this.maxV,d)));this.rgb=c(null===b?this.hsv[0]:this.hsv[0]=b,null===a?this.hsv[1]:this.hsv[1]=a,null===d?this.hsv[2]:this.hsv[2]=d);this.exportColor(f)};this.fromRGB=function(b,a,d,f){null!==b&&(b=Math.max(0,Math.min(1,b)));null!==a&&(a=Math.max(0,Math.min(1,a)));null!==d&&(d=Math.max(0,Math.min(1,d)));b=null===b?this.rgb[0]:b;a=null===a?this.rgb[1]:a;var e=null===d?this.rgb[2]:d,g=Math.min(Math.min(b,a),e);d=Math.max(Math.max(b,a),e);var h=
d-g;0===h?b=[null,0,d]:(b=b===g?3+(e-a)/h:a===g?5+(b-e)/h:1+(a-b)/h,b=[6===b?0:b,h/d,d]);null!==b[0]&&(this.hsv[0]=Math.max(0,this.minH,Math.min(6,this.maxH,b[0])));0!==b[2]&&(this.hsv[1]=null===b[1]?null:Math.max(0,this.minS,Math.min(1,this.maxS,b[1])));this.hsv[2]=null===b[2]?null:Math.max(0,this.minV,Math.min(1,this.maxV,b[2]));b=c(this.hsv[0],this.hsv[1],this.hsv[2]);this.rgb[0]=b[0];this.rgb[1]=b[1];this.rgb[2]=b[2];this.exportColor(f)};this.fromString=function(a,c){var d=a.match(/^\W*([0-9A-F]{3}([0-9A-F]{3})?)\W*$/i);
return d?(6===d[1].length?this.fromRGB(parseInt(d[1].substr(0,2),16)/255,parseInt(d[1].substr(2,2),16)/255,parseInt(d[1].substr(4,2),16)/255,c):this.fromRGB(parseInt(d[1][0]+d[1][0],16)/255,parseInt(d[1][1]+d[1][1],16)/255,parseInt(d[1][2]+d[1][2],16)/255,c),!0):!1};this.toString=function(){return(256|Math.round(255*this.rgb[0])).toString(16).substr(1)+(256|Math.round(255*this.rgb[1])).toString(16).substr(1)+(256|Math.round(255*this.rgb[2])).toString(16).substr(1)};var d=this,s="hvs"===this.pickerMode.toLowerCase()?
1:0,v=!1,k=jscolor.fetchElement(this.valueElement),g=jscolor.fetchElement(this.styleElement),p=!1,q=!1,r={},x=1,E=2,D=4,C=8;jscolor.addEvent(a,"focus",function(){d.pickerOnfocus&&d.showPicker()});jscolor.addEvent(a,"blur",function(){v?v=!1:window.setTimeout(function(){v||(k===a&&d.importColor(),d.pickerOnfocus&&d.hidePicker());v=!1},0)});k&&(t=function(){d.fromString(k.value,x);w()},jscolor.addEvent(k,"keyup",t),jscolor.addEvent(k,"input",t),jscolor.addEvent(k,"blur",G),k.setAttribute("autocomplete",
"off"));g&&(g.jscStyle={backgroundImage:g.style.backgroundImage,backgroundColor:g.style.backgroundColor,color:g.style.color});switch(s){case 0:jscolor.requireImage("hs.png");break;case 1:jscolor.requireImage("hv.png")}jscolor.requireImage("cross.gif");jscolor.requireImage("arrow.gif");this.importColor()}};jscolor.install();